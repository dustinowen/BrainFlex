/*----- constants -----*/

const easy =[
    {value: 1, image: './imgs/cards/easy/easy-01.png', matched: false},
    {value: 1, image: './imgs/cards/easy/easy-01.png', matched: false},
    {value: 2, image: './imgs/cards/easy/easy-02.png', matched: false},
    {value: 2, image: './imgs/cards/easy/easy-02.png', matched: false},
    {value: 3, image: './imgs/cards/easy/easy-03.png', matched: false},
    {value: 3, image: './imgs/cards/easy/easy-03.png', matched: false},
    {value: 4, image: './imgs/cards/easy/easy-04.png', matched: false},
    {value: 4, image: './imgs/cards/easy/easy-04.png', matched: false},
    {value: 5, image: './imgs/cards/easy/easy-05.png', matched: false},
    {value: 5, image: './imgs/cards/easy/easy-05.png', matched: false},
    {value: 6, image: './imgs/cards/easy/easy-06.png', matched: false},
    {value: 6, image: './imgs/cards/easy/easy-06.png', matched: false},
    {value: 7, image: './imgs/cards/easy/easy-07.png', matched: false},
    {value: 7, image: './imgs/cards/easy/easy-07.png', matched: false},
    {value: 8, image: './imgs/cards/easy/easy-08.png', matched: false},
    {value: 8, image: './imgs/cards/easy/easy-08.png', matched: false},
    {value: 9, image: './imgs/cards/easy/easy-09.png', matched: false},
    {value: 9, image: './imgs/cards/easy/easy-09.png', matched: false}
];

const medium =[
    {value: 1, image: './imgs/cards/medium/medium-01.png', matched: false},
    {value: 1, image: './imgs/cards/medium/medium-01.png', matched: false},
    {value: 2, image: './imgs/cards/medium/medium-02.png', matched: false},
    {value: 2, image: './imgs/cards/medium/medium-02.png', matched: false},
    {value: 3, image: './imgs/cards/medium/medium-03.png', matched: false},
    {value: 3, image: './imgs/cards/medium/medium-03.png', matched: false},
    {value: 4, image: './imgs/cards/medium/medium-04.png', matched: false},
    {value: 4, image: './imgs/cards/medium/medium-04.png', matched: false},
    {value: 5, image: './imgs/cards/medium/medium-05.png', matched: false},
    {value: 5, image: './imgs/cards/medium/medium-05.png', matched: false},
    {value: 6, image: './imgs/cards/medium/medium-06.png', matched: false},
    {value: 6, image: './imgs/cards/medium/medium-06.png', matched: false},
    {value: 7, image: './imgs/cards/medium/medium-07.png', matched: false},
    {value: 7, image: './imgs/cards/medium/medium-07.png', matched: false},
    {value: 8, image: './imgs/cards/medium/medium-08.png', matched: false},
    {value: 8, image: './imgs/cards/medium/medium-08.png', matched: false},
    {value: 9, image: './imgs/cards/medium/medium-09.png', matched: false},
    {value: 9, image: './imgs/cards/medium/medium-09.png', matched: false},
    {value: 10, image: './imgs/cards/medium/medium-10.png', matched: false},
    {value: 10, image: './imgs/cards/medium/medium-10.png', matched: false},
    {value: 11, image: './imgs/cards/medium/medium-11.png', matched: false},
    {value: 11, image: './imgs/cards/medium/medium-11.png', matched: false},
    {value: 12, image: './imgs/cards/medium/medium-12.png', matched: false},
    {value: 12, image: './imgs/cards/medium/medium-12.png', matched: false}
];

const hard =[
    {value: 1, image: './imgs/cards/hard/hard-01.png', matched: false},
    {value: 1, image: './imgs/cards/hard/hard-01.png', matched: false},
    {value: 2, image: './imgs/cards/hard/hard-02.png', matched: false},
    {value: 2, image: './imgs/cards/hard/hard-02.png', matched: false},
    {value: 3, image: './imgs/cards/hard/hard-03.png', matched: false},
    {value: 3, image: './imgs/cards/hard/hard-03.png', matched: false},
    {value: 4, image: './imgs/cards/hard/hard-04.png', matched: false},
    {value: 4, image: './imgs/cards/hard/hard-04.png', matched: false},
    {value: 5, image: './imgs/cards/hard/hard-05.png', matched: false},
    {value: 5, image: './imgs/cards/hard/hard-05.png', matched: false},
    {value: 6, image: './imgs/cards/hard/hard-06.png', matched: false},
    {value: 6, image: './imgs/cards/hard/hard-06.png', matched: false},
    {value: 7, image: './imgs/cards/hard/hard-07.png', matched: false},
    {value: 7, image: './imgs/cards/hard/hard-07.png', matched: false},
    {value: 8, image: './imgs/cards/hard/hard-08.png', matched: false},
    {value: 8, image: './imgs/cards/hard/hard-08.png', matched: false},
    {value: 9, image: './imgs/cards/hard/hard-09.png', matched: false},
    {value: 9, image: './imgs/cards/hard/hard-09.png', matched: false},
    {value: 10, image: './imgs/cards/hard/hard-10.png', matched: false},
    {value: 10, image: './imgs/cards/hard/hard-10.png', matched: false},
    {value: 11, image: './imgs/cards/hard/hard-11.png', matched: false},
    {value: 11, image: './imgs/cards/hard/hard-11.png', matched: false},
    {value: 12, image: './imgs/cards/hard/hard-12.png', matched: false},
    {value: 12, image: './imgs/cards/hard/hard-12.png', matched: false},
    {value: 13, image: './imgs/cards/hard/hard-13.png', matched: false},
    {value: 13, image: './imgs/cards/hard/hard-13.png', matched: false},
    {value: 14, image: './imgs/cards/hard/hard-14.png', matched: false},
    {value: 14, image: './imgs/cards/hard/hard-14.png', matched: false},
    {value: 15, image: './imgs/cards/hard/hard-15.png', matched: false},
    {value: 15, image: './imgs/cards/hard/hard-15.png', matched: false}
];

const brainImgs = [
    {value: 5, src: './imgs/scoreboard/brain.hearteyes.png'},
    {value: 4, src: './imgs/scoreboard/brain.hearteyes.png'},
    {value: 3, src: './imgs/scoreboard/brain.hearteyes.png'},
    {value: 2, src: './imgs/scoreboard/brain.hearteyes.png'},
    {value: 1, src: './imgs/scoreboard/brain.hearteyes.png'},
    {value: 0, src: './imgs/scoreboard/brain.hearteyes.png'},
];

const setup = [
];

const levelSetup = [
    {value: easy},
    {value: medium},
    {value: hard}
];

let levelChoice;
let lives = 5;
let choiceOne = null;
let choiceOneDiv = null;

const squaresEls = document.querySelectorAll('.game-squares');
const brainEls = document.querySelectorAll('.brain-container');
const btnEls = document.querySelectorAll('.level');
const lvlSelect = document.getElementsByClassName('level-select');
const gameOverContainer = document.querySelector('.gameover-container');
const gameboardContainer = document.querySelector('.gameboard-container');
const btnContainer = document.querySelector('.button-container');
const againContainer = document.querySelector('.play-again-container');
const cardContainer = document.querySelector('.card-container');
const fiveLives = document.querySelector('.brains4');
const fourLives = document.querySelector('.brains3');
const threeLives = document.querySelector('.brains2');
const twoLives = document.querySelector('.brains1');
const oneLives = document.querySelector('.brains0');
const again = document.querySelector('.play-again-button');
const levelSelectButtons = document.querySelectorAll('.lvlSelect');



squaresEls.forEach(function (el, index) {
    el.addEventListener('click', function (evt) {
        let clickedCard;

        if (levelChoice === easy) {
            clickedCard = easy[index];
            el.setAttribute('src', clickedCard.image);
            if (choiceOne === null) {
                choiceOne = clickedCard;
                choiceOneDiv = evt.target;
            } else if (choiceOne.value === clickedCard.value) {
                choiceOne = null;
                choiceOneDiv = null;
            } else {
                setTimeout(function () { 
                choiceOneDiv.setAttribute('src', './imgs/cards/square.png');
                squaresEls[index].setAttribute('src', './imgs/cards/square.png');
                choiceOne = null;
                choiceOneDiv = null;
                }, 500);
                lives--;
                render();
            };

        } else if (levelChoice === medium) {
            clickedCard = medium[index];
            el.setAttribute('src', clickedCard.image);

            if (choiceOne === null) {
                choiceOne = clickedCard;
                choiceOneDiv = evt.target;
            } else if (choiceOne.value === clickedCard.value){
                choiceOne = null;
                choiceOneDiv = null;
            } else {
                setTimeout(function () { 
                choiceOneDiv.setAttribute('src', './imgs/cards/square.png');
                squaresEls[index].setAttribute('src', './imgs/cards/square.png');
                choiceOne = null;
                choiceOneDiv = null;
                }, 1000);
                lives--
                render();
            };
                
        } else if (levelChoice === hard) {
            clickedCard = hard[index];
            el.setAttribute('src', clickedCard.image);
                
            if (choiceOne === null) {
                choiceOne = clickedCard;
                choiceOneDiv = evt.target;
            } else if (choiceOne.value === clickedCard.value) {
                choiceOne = null;
                choiceOneDiv = null;
            } else {
                setTimeout(function () { 
                choiceOneDiv.setAttribute('src', './imgs/cards/square.png');
                squaresEls[index].setAttribute('src', './imgs/cards/square.png');
                choiceOne = null;
                choiceOneDiv = null;
                }, 1000);
                lives--
                render();
            } ;
        };
    });
}); 
    


again.addEventListener('click', function(){
    location.reload();
});

levelSelectButtons.forEach(function(bttn){
    bttn.addEventListener('click', function(evt){     
    levelChoice = evt.target.textContent;
    });
});
        

function init(){
    renderBoard(null);
    clearBrains();
    setLevel();
    againContainer.remove();
    gameOverContainer.remove();
    };


function setLevel(){
    btnEls.forEach(function(el, index) {
        el.addEventListener('click', () => {
        let clickedCard = levelSetup[index];
        levelChoice = levelSetup[index].value;
        shuffle(levelChoice);
        renderBoard(levelChoice);

        });
    });
};


function shuffle(array) {
    let currentIndex = array.length, randomIndex;
    
    while (currentIndex != 0) {
        
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex--;
        
        [array[currentIndex], array[randomIndex]] = [
            array[randomIndex], array[currentIndex]];
        }
        
        return array;
    }  ;
    

    function renderBoard(levelChoice){

        squaresEls.forEach((squareEl, index)=>{
            squareEl.classList.remove('hidden');
        });

        if (levelChoice === easy){
            
            squaresEls.forEach((squareEl, index)=>{
                let current = easy[index];
                if (current) {}  
                else  {
                    squareEl.classList.add('hidden')
                };
                btnContainer.remove();
                render();
            });
                
        } else if (levelChoice === medium){
            squaresEls.forEach((squareEl, index)=>{
                let current = medium[index];
                if (current) {}
                else  {
                    squareEl.classList.add('hidden')
                };
                btnContainer.remove();
                render();
            });
            
        } else if (levelChoice === hard){
            squaresEls.forEach((squareEl, index)=>{
                let current = hard[index]
                if (current) {}
                else  {
                    squareEl.classList.add('hidden')
                };
                btnContainer.remove();
                render();
                })

        } else {
            squaresEls.forEach((squareEl, index)=>{
                let current = setup[index];
                if (current) {}
                else {
                    squareEl.classList.add('hidden')
                };
            });
        };
    };  

   
 function resetGame(){
    resetBoard();
    setLevel();
    let levelChoice;
    let lives = 4;
    let choiceOne = null;
    let choiceOneDiv = null;
    againContainer.remove();
    cardContainer.classList.remove('hidden');
    document.querySelector('body').appendChild(btnContainer);
    gameOverContainer.remove();
    init();   
}

    function resetBoard(){
        squaresEls.forEach((squareEl, index)=>{
            let current = hard[index]
            if (!current) {} 
            else  {
                squareEl.classList.remove('hidden');
                squareEl.setAttribute('src', './imgs/cards/square.png');
                squareEl.matched = false;
            };
        });
    };
        
        

function clearBrains () {
    fiveLives.remove();
    fourLives.remove();
    threeLives.remove();
    twoLives.remove();
    oneLives.remove();
}



function render(){
    if (lives === 5){
        document.querySelector('.brain-container').appendChild(fiveLives);
    } else if (lives === 4){
        fiveLives.remove();
        document.querySelector('.brain-container').appendChild(fourLives);
    } else if (lives === 3){
        fourLives.remove();
        document.querySelector('.brain-container').appendChild(threeLives);
    } else if (lives === 2){
        threeLives.remove();
        document.querySelector('.brain-container').appendChild(twoLives);
    } else if (lives === 1){
        twoLives.remove();
        document.querySelector('.brain-container').appendChild(oneLives);
    } else {
        levelChoice = null;
        renderBoard();
        oneLives.remove();
        gameboardContainer.remove();
        document.querySelector('body').appendChild(againContainer);
        document.querySelector('body').appendChild(gameOverContainer);
    };
};


init(); 